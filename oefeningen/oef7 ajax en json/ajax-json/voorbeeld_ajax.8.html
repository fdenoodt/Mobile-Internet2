<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>Les 4 : voorbeeld 6 : JSON</title>
		<meta name="description" content="" />
		<meta name="author" content="Steven" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<script src="js/jquery-3.1.1.min.js"></script>
        
		<script>
            "use strict";
            /*global $, console */

			$(function () {
				// de JSON data ophalen
				$.ajax({
					type : "GET",
					url : "http://ophalvens.net/mi2/les7/json/adres-2.json.php",
					dataType : 'json'
				}).done(function (response) {
                    // ok
                    var antwoord = "",
                        i,
                        adres;
                    for (i = 0; i < response.results.length; i += 1) {

                        adres = response.results[i];
                        antwoord += "<tr><td>" + adres.formatted_address + "<\/td>";
                        antwoord += "<td>" + adres.geometry.location.lat + "<\/td>";
                        antwoord += "<td>" + adres.geometry.location.lng + "<\/td><\/tr>";
                    }
                    $("#adres tbody").html(antwoord);
                    
                    console.log("done");
			    }).fail(function (response, statusText, xhr) {
                    // niet-ok
                    console.log("Fout : " + statusText);
                }).always(function () {
                    console.log("Klaar");
                });
			});

			
		</script>
	</head>

	<body>
		<div>
			<header>
				<h1>jQuery - automatisch data laden</h1>
			</header>
			<section>
				<article>
					<table id="adres">
						<thead>
							<tr>
								<th>Plaats</th>
								<th>Latitude</th>
								<th>Longitude</th>
							</tr>
						</thead>
						<tbody>
							
						</tbody>
					</table>
				</article>
			</section>

		</div>
	</body>
</html>
